<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记性不太好，在这儿记录点东西"><title>CentOS使用笔记 | July的一亩三分地</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/JustForFun/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/JustForFun/favicon.ico"><link rel="apple-touch-icon" href="/JustForFun/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/JustForFun/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">CentOS使用笔记</h1><a id="logo" href="/JustForFun/.">July的一亩三分地</a><p class="description">在这里留下爪印</p></div><div id="nav-menu"><a href="/JustForFun/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/JustForFun/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/JustForFun/about/"><i class="fa fa-user"> 关于</i></a><a href="/JustForFun/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">CentOS使用笔记</h1><div class="post-meta">Apr 1, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>关于CentOS的东东都扔这里<br><a id="more"></a></p>
<h3 id="CentOS设置网络"><a href="#CentOS设置网络" class="headerlink" title="CentOS设置网络"></a>CentOS设置网络</h3><p>设置IP：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/sysconfig/network-scriptes/ifcfg-eno16777984</div></pre></td></tr></table></figure></p>
<p>添加路由<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ip route add 192.168.38.0/24 via 192.168.70.1 dev eno16777984</div></pre></td></tr></table></figure></p>
<p>其中192.168.70.1是CentOS的网关，192.168.38.0/24表示38网段的IP需要访问CentOS</p>
<h3 id="CentOS设置光盘为yum源"><a href="#CentOS设置光盘为yum源" class="headerlink" title="CentOS设置光盘为yum源"></a>CentOS设置光盘为yum源</h3><h4 id="查看设备-发现cdrom-创建cdrom文件夹并将光盘挂载到-cdrom文件夹"><a href="#查看设备-发现cdrom-创建cdrom文件夹并将光盘挂载到-cdrom文件夹" class="headerlink" title="查看设备,发现cdrom,创建cdrom文件夹并将光盘挂载到/cdrom文件夹"></a>查看设备,发现cdrom,创建cdrom文件夹并将光盘挂载到/cdrom文件夹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ls /dev  </div><div class="line">mkdir /cdrom  </div><div class="line">mount /dev/cdrom /cdrom</div></pre></td></tr></table></figure>
<h4 id="创建local-repo文件"><a href="#创建local-repo文件" class="headerlink" title="创建local.repo文件"></a>创建local.repo文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">vi /etc/yum.repos.d/local.repo</div><div class="line">---文件内容---</div><div class="line">  [LocalRepo]</div><div class="line">  name=Local Repository</div><div class="line">  baseurl=file:///cdrom</div><div class="line">  enabled=1</div><div class="line">  gpgcheck=1</div><div class="line">  gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</div></pre></td></tr></table></figure>
<p>删除其他repo文件，并执行清理yum clean all<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum clean all</div></pre></td></tr></table></figure></p>
<p>测试安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install vsftpd</div></pre></td></tr></table></figure></p>
<h3 id="为虚拟机增加硬盘空间"><a href="#为虚拟机增加硬盘空间" class="headerlink" title="为虚拟机增加硬盘空间"></a>为虚拟机增加硬盘空间</h3><p>1、在VMware vSphere Client中为虚拟机分配硬盘空间。<br><img src="http://img2.ph.126.net/iqL1f-O0m0i12PXZlBlI4A==/6631249185119984183.png" alt="为虚拟机分配硬盘空间"></p>
<p>2、 进入系统后，查看硬盘信息、分区信息。</p>
<p>df -l、fdisk -l<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# df -h</div><div class="line">Filesystem            Size  Used Avail Use% Mounted on</div><div class="line">/dev/mapper/VolGroup00-LogVol00</div><div class="line">                       38G  3.2G   33G   9% /</div><div class="line">/dev/sda1              99M   12M   82M  13% /boot</div><div class="line">tmpfs                 506M     0  506M   0% /dev/shm</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# fdisk -l</div><div class="line">Disk /dev/sda: 64.4 GB, 64424509440 bytes</div><div class="line">255 heads, 63 sectors/track, 7832 cylinders</div><div class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</div><div class="line"></div><div class="line">   Device Boot      Start         End      Blocks   Id  System</div><div class="line">/dev/sda1   *           1          13      104391   83  Linux</div><div class="line">/dev/sda2              14        5221    41833260   8e  Linux LVM</div></pre></td></tr></table></figure>
<p>————–这里看到sda1还有sda2;待会新建分区sda3。</p>
<p>3、 开始对硬盘扩容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# fdisk /dev/sda</div><div class="line">The number of cylinders for this disk is set to 7832.</div><div class="line">There is nothing wrong with that, but this is larger than 1024,</div><div class="line">and could in certain setups cause problems with:</div><div class="line">1) software that runs at boot time (e.g., old versions of LILO)</div><div class="line">2) booting and partitioning software from other OSs</div><div class="line">   (e.g., DOS FDISK, OS/2 FDISK)</div><div class="line"></div><div class="line">Command (m for help): n</div><div class="line">Command action</div><div class="line">   e   extended</div><div class="line">   p   primary partition (1-4)</div><div class="line">p</div><div class="line">Partition number (1-4): 3</div><div class="line">First cylinder (5222-7832, default 5222):</div><div class="line">Using default value 5222</div><div class="line">Last cylinder or +size or +sizeM or +sizeK (5222-7832, default 7832):</div><div class="line">Using default value 7832</div><div class="line"></div><div class="line">Command (m for help): t  (修改分区类型为 Linux LVM, 8e)</div><div class="line">Partition number (1-4): 3</div><div class="line">Hex code (type L to list codes): 8e</div><div class="line">Changed system type of partition 3 to 8e (Linux LVM)</div><div class="line"></div><div class="line">Command (m for help): wq</div><div class="line">The partition table has been altered!</div></pre></td></tr></table></figure>
<p>4、验证并让系统重新读取分区信息:<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# fdisk -l</div><div class="line">Disk /dev/sda: 64.4 GB, 64424509440 bytes</div><div class="line">255 heads, 63 sectors/track, 7832 cylinders</div><div class="line">Units = cylinders of 16065 * 512 = 8225280 bytes</div><div class="line"></div><div class="line">   Device Boot      Start         End      Blocks   Id  System</div><div class="line">/dev/sda1   *           1          13      104391   83  Linux</div><div class="line">/dev/sda2              14        5221    41833260   8e  Linux LVM</div><div class="line">/dev/sda3            5222        7832    20972857+  8e  Linux</div></pre></td></tr></table></figure></p>
<p>已经可以看到sda3了。但是分区表还没有完全可用，<br>—-可以看到sda3已经出现了,表示为可用的状态.下面继续:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# partprobe</div><div class="line">[root@localhost ~]# partprobe /dev/sda3</div></pre></td></tr></table></figure></p>
<p>ps:使用fdisk工具只是将分区信息写到磁盘,如果需要mkfs磁盘分区则需要重启系统,而使用partprobe则可以使kernel重新读取分区信息,从而避免重启系统.————–<br>重启系统：</p>
<p>注释：我的执行partprobe /dev/sda3 不成功，我重启的服务器</p>
<p>5、创建物理卷及加入组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# pvcreate /dev/sda3</div><div class="line">  Physical volume &quot;/dev/sda3&quot; successfully created</div><div class="line">[root@localhost ~]# vgextend VolGroup00 /dev/sda3</div><div class="line">  Volume group &quot;VolGroup00&quot; successfully extended</div></pre></td></tr></table></figure></p>
<p>查看物理卷情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# vgdisplay</div><div class="line">  --- Volume group ---</div><div class="line">  VG Name               VolGroup00</div><div class="line">  System ID            </div><div class="line">  Format                lvm2</div><div class="line">  Metadata Areas        2</div><div class="line">  Metadata Sequence No  4</div><div class="line">  VG Access             read/write</div><div class="line">  VG Status             resizable</div><div class="line">  MAX LV                0</div><div class="line">  Cur LV                2</div><div class="line">  Open LV               2</div><div class="line">  Max PV                0</div><div class="line">  Cur PV                2</div><div class="line">  Act PV                2</div><div class="line">  VG Size               59.88 GB</div><div class="line">  PE Size               32.00 MB</div><div class="line">  Total PE              1916</div><div class="line">  Alloc PE / Size       1276 / 39.88 GB</div><div class="line">  Free  PE / Size       640 / 20.00 GB</div><div class="line">  VG UUID               qLjCMX-FZv2-Neha-Nze0-rAoq-p1R0-QV5pLu</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@localhost ~]# lvresize -L +20G /dev/VolGroup00/LogVol00</div><div class="line">  Extending logical volume LogVol00 to 58.88 GB</div><div class="line">  Logical volume LogVol00 successfully resized</div><div class="line"></div><div class="line">[root@localhost ~]# resize2fs /dev/VolGroup00/LogVol00</div></pre></td></tr></table></figure>
<p>成功。</p>
<h3 id="常用系统命令"><a href="#常用系统命令" class="headerlink" title="常用系统命令"></a>常用系统命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ps aux|grep &apos;svn&apos;</div><div class="line">kill -SIGHUP 5931  ---------5931 is pid</div><div class="line">netstat -ano   、   netstat -tlnp</div></pre></td></tr></table></figure>
<p>解压缩：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">unzip p10098816_112020_Linux-x86-64_1of7.zip -d  $PATCHHOME</div></pre></td></tr></table></figure></p>
<p>复制文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp $ORACLE_HOME/dbs/initVPROD1.ora /s01/orabase/product/11.2.0/dbhome_2/dbs</div></pre></td></tr></table></figure></p>
<p>创建文件夹、修改文件夹用户、修改文件夹权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mkdir -p /u01/app/grid</div><div class="line">mkdir -p /u01/app/11.2.0/grid</div><div class="line">mkdir -p /u01/app/oracle</div><div class="line">chown -R oracle:oinstall /u01</div><div class="line">chown -R grid:oinstall /u01/app/grid</div><div class="line">chown -R grid:oinstall /u01/app/11.2.0</div><div class="line">chmod -R 775 /u01</div></pre></td></tr></table></figure></p>
<p>查看cup、内存等：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">top</div></pre></td></tr></table></figure></p>
<p>查看环境变量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#:  env</div><div class="line">#： echo $LANG</div></pre></td></tr></table></figure></p>
<p>查找名称为passwd的文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># find / -name passwd</div></pre></td></tr></table></figure></p>
</div><script type="text/javascript" src="/JustForFun/js/share.js?v=0.0.0" async></script><a data-url="https://julyi.github.io/JustForFun/JustForFun/2017/04/01/CentOS/" data-id="cj1gc4ycs0000wkwm5lsucn3v" class="article-share-link">分享到</a><div class="tags"><a href="/JustForFun/tags/centOS/">centOS</a></div><div class="post-nav"><a href="/JustForFun/2017/04/05/jersey-First/" class="pre">jersey 入门</a><a href="/JustForFun/2017/03/31/imghosting/" class="next">使用GitHub做博客图床</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://julyi.github.io/JustForFun"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/JustForFun/categories/math/">math</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/JustForFun/tags/centOS/" style="font-size: 15px;">centOS</a> <a href="/JustForFun/tags/JPush/" style="font-size: 15px;">JPush</a> <a href="/JustForFun/tags/blog-GitHub/" style="font-size: 15px;">blog,GitHub</a> <a href="/JustForFun/tags/geometry/" style="font-size: 15px;">geometry</a> <a href="/JustForFun/tags/math/" style="font-size: 15px;">math</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/04/13/math/academic-life/">人生若只如初见：学术人生</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/04/13/math/everlasting-geometry/">几何永恒</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/04/08/Learning-Maven/">Learning Maven</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/04/07/favorite-site/">favorite site</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/04/06/IT-Gossip/">IT 八卦</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/04/05/jersey-First/">jersey 入门</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/04/01/CentOS/">CentOS使用笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/03/31/imghosting/">使用GitHub做博客图床</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/03/30/JPush-Step-by-Step-For-Myself/">JPush Step by Step For Myself(Android)</a></li><li class="post-list-item"><a class="post-list-link" href="/JustForFun/2017/03/28/hello/">纪念GitHub博客搭建成功</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/JustForFun/." rel="nofollow">July的一亩三分地.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/JustForFun/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/JustForFun/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/JustForFun/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/JustForFun/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/JustForFun/js/smartresize.js?v=0.0.0"></script></div></body></html>